1. NVL, NVL2
2. DECODE
3. INSTR
4. SUBSTR
5. CASE-WHEN-THEM
6. SUM
7. COUNT(상용, LIVE, 실)
8. GROUP BY (부서별, 나이별 등등)

<br>

# 4월 15일 Ch7 복습
<br>

```sql
SELECT AVG(SAL), DEPTNO
  FROM EMP;

-- 단일그룹의 함수가 아닙니다.
-- SAL은 평균낸 값이라 1개, DEPTNO는 각 사원별로 가지고 있어서 14개의 데이터 있음
-- 그룹핑 된 데이터와 안된 데이터를 같이 뽑으려면 GROUP BY로 넣어줘야함.
```


```sql
SELECT ENAME, DEPTNO, AVG(SAL)
  FROM EMP
GROUP BY DEPTNO;

-- ENAME도 GROUP BY에 추가 해 줘야함
-- 각각의 ENAME은 각각의 SAL을 갖는데 굳이 AVG를 찾을 필요가 없음.
```


```sql
SELECT DEPTNO, JOB, AVG(SAL)
  FROM EMP
GROUP BY DEPTNO, JOB
HAVING AVG(SAL) >= 2000
ORDER BY DEPTNO, JOB;

-- DEPTNO(부서별), JOB(직종별) 평균 연봉
-- HAVING(WHERE처럼 조건) : 평균SALDL 2000이상인 집합만
-- ORDER BY : 부서별, JOB 별로 정렬하겠다.
```


```sql
SELECT DEPTNO, JOB, AVG(SAL)
  FROM EMP
 WHERE SAL <= 3000  --sal이 3000이하인 데이터만
GROUP BY DEPTNO, JOB
HAVING AVG(SAL) >= 2000
ORDER BY DEPTNO, JOB;

-- where : select~from의 조건절
-- SAL이 3000 이하인 사원들을 DEPTNO, JOB으로 그룹화
-- 그룹화한 데이터에서 평균SAL이 2000이상인 사원들을 DEPTNO, JOB으로 뽑아서 정렬한다.
```


<br>

![image](https://github.com/user-attachments/assets/e0ae6e00-f2c8-4a8e-85e4-d7c0935969a2)
- 평균 sal이 3000이하인 데이터를 group by해서 데이터 추출

<br>
<br>

![image](https://github.com/user-attachments/assets/246a3834-4f2b-45c2-a9b2-2364629435c0)
- 전체 직원들의 sal이 3000이하인 데이터 추출

<BR>

```sql
SELECT DEPTNO, JOB, COUNT(*), MAX(SAL), SUM(SAL), AVG(SAL)
  FROM EMP
GROUP BY DEPTNO, JOB
ORDER BY DEPTNO, JOB;

-- group by부터 리딩하면 됨.
-- deptno, job별 deptno, job, 전체count, sal최대값, sal의 합계, sal의 평균데이터
```

<br>

```sql
SELECT DEPTNO, JOB, COUNT(*), MAX(SAL), SUM(SAL), AVG(SAL)
  FROM EMP
GROUP BY ROLLUP(DEPTNO, JOB);

-- rollup은 중간 계산 기능. (소계기능임)
```

<br>

- rollup, sets, cube등은 오라클만 가지고 있는 특유 기능. (넘어감~)

<br>

```sql
SELECT DEPTNO,
       LISTAGG(ENAME, ', ')
       WITHIN GROUP(ORDER BY SAL DESC) AS ENAMES
  FROM EMP
GROUP BY DEPTNO;
-- LISTAGG : 리스트를 만든다. ENAME 사이에 ,를 넣어서
-- GROUP BY DEPTNO : DEPTNO별로 구분한다.
-- ORDER BY SAL DESC : SAL을 기준으로 내림차순으로 정렬합니다
-- (ORDER BY SAL DESC) AS ENAMES : 내림차순 정렬한 데이터의 컬럼명을 ENAMES로 출력
-- WITHIN GROUP : 집계 대상의 데이터 정렬을 지정한다.
```

- LISTAGG를 사용하면 컬럼추가 없이 저장 가능
- 예비컬럼이 있다면 예비컬럼 활용도 가능하다.
- LISTAGG를 사용하면 자바에 배열로 넣을 수 있다.

<BR>


